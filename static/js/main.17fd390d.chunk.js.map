{"version":3,"sources":["components/violation.js","components/grid.js","components/active-toggle.js","components/search.js","App.js","index.js"],"names":["Violation","athlete","Grid","violations","loading","length","style","tableLayout","map","a","i","key","Toggle","onCheck","htmlFor","cursor","id","type","value","onChange","e","target","checked","Search","setViolations","useState","query","setQuery","active","setActive","options","shouldSort","threshold","location","distance","minMatchCharLength","keys","useEffect","performSearch","then","onActiveToggle","Promise","resolve","Fuse","search","x","item","today","moment","filter","isAfter","fontSize","onKeyUp","event","csv","csvtojson","App","result","setResult","setIsLoading","randomString","Math","random","toString","substring","url","fetch","resp","text","bannedAthletes","fromString","json","push","splice","get","className","overflowX","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.17fd390d.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Violation = ({ athlete }) => {\n  return (\n    <>\n      <td>{athlete[\"Name\"]}</td>\n      <td>{athlete[\"Date of Birth\"]}</td>\n      <td>{athlete[\"Nationality\"]}</td>\n      <td>{athlete[\"Sanction\"]}</td>\n      <td>{athlete[\"Ineligibility until\"]}</td>\n      <td>{athlete[\"Description\"]}</td>\n    </>\n  );\n};\n\nexport default Violation;","import React from \"react\";\n\n\nimport Violation from \"./violation\";\n\n\nconst Grid = ({ violations, loading }) => {\n\n  if (loading) {\n    return <span>Loading ...</span>\n  }\n\n  return violations.length > 0\n    ? (<table style={{ tableLayout: \"fixed\" }}>\n      <thead>\n      <tr>\n        <th>Name</th>\n        <th>Date of Birth</th>\n        <th>Nationality</th>\n        <th>Sanction</th>\n        <th>Ineligibility until</th>\n        <th>Description</th>\n      </tr>\n      </thead>\n      <tbody>\n      {violations.map((a, i) =>\n        <tr key={i}>\n          <Violation athlete={a}/>\n        </tr>\n      )}\n      </tbody>\n    </table>)\n    : <span> No results </span>;\n};\n\nexport default Grid;\n\n","import React from \"react\";\n\nconst Toggle = ({ onCheck }) => {\n  return (\n    <label htmlFor=\"active\" style={{ cursor: \"pointer\" }}>\n      <input id=\"active\" type=\"checkbox\" value=\"Active Suspensions\" onChange={e => onCheck(e.target.checked)}/>\n      &nbsp;Active suspensions only\n    </label>\n  );\n};\n\nexport default Toggle;","import React, { useEffect, useState } from \"react\";\nimport Fuse from \"fuse.js\";\nimport moment from \"moment\";\nimport Toggle from \"./active-toggle\";\nimport { violations } from \"../App\";\n\nconst Search = ({ setViolations }) => {\n\n  let [query, setQuery] = useState(\"\");\n  let [active, setActive] = useState(false);\n\n  let options = {\n    shouldSort: true,\n    threshold: 0.1,\n    location: 0,\n    distance: 100,\n    minMatchCharLength: 1,\n    keys: [\n      \"Name\"\n    ]\n  };\n\n  useEffect(() => {\n    performSearch(violations, query)\n      .then(violations => onActiveToggle(violations, active))\n      .then(violations => setViolations(violations));\n  }, [query, active]);\n\n  const performSearch = (violations, query) => {\n    return new Promise(resolve => {\n      if (query === \"\") {\n        return resolve(violations);\n      }\n\n      let fuse = new Fuse(violations, options); // \"list\" is the item array\n      let result = fuse.search(query);\n      resolve(result.map(x => x.item));\n    });\n  };\n\n  const onActiveToggle = (violations, active) => {\n    return new Promise(resolve => {\n      if (active) {\n        const today = moment();\n        const activeSuspensions = violations.filter(x => {\n          const until = moment(x[\"Ineligibility until\"], \"DD/MM/YYYY\");\n          return until.isAfter(today);\n        });\n        return resolve(activeSuspensions);\n      }\n      resolve(violations);\n    });\n  };\n\n\n  return (\n    <form>\n      <fieldset>\n        <h1>\n          Search for violations\n        </h1>\n        <input style={{ fontSize: \"1.5rem\" }} type=\"text\" id=\"search\" onKeyUp={event => setQuery(event.target.value)}/>\n        <Toggle onCheck={e => setActive(!active)}/>\n      </fieldset>\n    </form>\n  );\n};\n\nexport default Search;","import React, { useEffect, useState } from \"react\";\nimport Grid from \"./components/grid\";\nimport Search from \"./components/search\";\nimport csvtojson from \"csvtojson\";\n\nconst csv = csvtojson();\n\nexport const violations = [];\n\nfunction App() {\n\n  let [result, setResult] = useState([]);\n  let [_, setIsLoading] = useState(false);\n\n\n  useEffect(() => {\n\n    const get = async () => {\n      //http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript\n      const randomString = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n\n      try {\n        setIsLoading(true);\n        const url = `/doping-suspensions/banned-athletes.csv?${randomString}`;\n        const resp = await fetch(url);\n        const bannedAthletes = await resp.text();\n        const json = await csv.fromString(bannedAthletes);\n        violations.push(...json);\n        setResult(json);\n        setIsLoading(false);\n      } catch (e) {\n        violations.splice(0, violations.length);\n        setResult([]);\n      }\n    };\n\n    get();\n\n  }, []);\n\n\n  return (\n    <div className=\"App\">\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"column\">\n            <Search setViolations={setResult}/>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div style={{ overflowX: \"auto\" }}>\n            <div className=\"column\">\n              <Grid violations={result}/>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App/>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n"],"sourceRoot":""}